window.GFMollieSettings=null,window.setting_mollie=gform_mollie_pluginsettings_strings,function(o){o(document).ready(function(){var e=this,n="true"===gform_mollie_pluginsettings_strings.is_legacy,t=n?"_gaddon_setting_":"_gform_setting_",i=o("#gform-settings-save");e.ui={buttons:{connect:o("#gform_mollie_connect_button"),disconnect:o("#gform_mollie_disconnect_button"),save:i},mode:o('[name="'+t+'mode"]'),profileID:o("#profile_id"),saveContainer:(n?i.parent():i).parent(),selectedModeValue:o('[name="'+t+'mode"]:checked').val()},this.init=function(){this.bindSettingsChange(),this.bindDisconnect()},this.bindSettingsChange=function(){e.ui.mode.on("change",function(){e.ui.selectedModeValue=o(this).val(),e.ui.buttons.disconnect.length&&e.ui.saveContainer.fadeIn()}),e.ui.buttons.connect.on("click",function(n){n.preventDefault(),window.location.href=o(this).attr("href")+"&mode="+e.ui.selectedModeValue}),e.ui.profileID.on("change",function(){e.ui.saveContainer.fadeIn()})},this.bindDisconnect=function(){e.ui.buttons.disconnect.on("click",function(n){n.preventDefault(),window.confirm(gform_mollie_pluginsettings_strings.disconnect)&&(e.ui.buttons.disconnect.attr("disabled","disabled"),o.post({url:ajaxurl,dataType:"json",data:{action:"gfmollie_deauthorize",nonce:gform_mollie_pluginsettings_strings.ajax_nonce},success:function(n){n.success?window.location.reload():window.alert(n.error),e.ui.buttons.disconnect.removeAttr("disabled")},fail:function(n){window.alert(n.error)}}))})},this.init()})}(jQuery);